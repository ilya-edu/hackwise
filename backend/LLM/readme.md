#app.py
#Установите ваш ngrok authtoken: Зарегистрируйтесь на ngrok и получите ваш authtoken. Затем установите его в переменную окружения:

os.environ["NGROK_AUTHTOKEN"] ="ваш-ngrok-authtoken"

После настройки окружения можно запустить Flask-приложение:

python app.py

Сервер будет запущен на http://localhost:5002, а ngrok предоставит публичный URL.

#Пример запроса:

curl -X POST "http://<ngrok-url>/generate" \
-H "Content-Type: application/json" \
-d '{
    "system_prompt": "Ответь на вопросы, используя только информацию из документов.",
    "query": "Какая столица Франции?",
    "documents": [
        {"id": "doc1", "content": "Франция — это страна в Европе. Ее столица — Париж."},
        {"id": "doc2", "content": "Германия — соседняя страна Франции."}
    ]
}'

Пример ответа:

{
  "output": "Столица Франции — Париж.",
  "relevant": ["doc1"]
}

#API эндпоинты

POST /generate

Тело запроса (JSON):

system_prompt (необязательно): Системный промпт для настройки поведения модели.
query (обязательно): Запрос пользователя.
documents (обязательно): Список документов, которые модель должна использовать для ответа на запрос. Каждый документ должен иметь id и content.

Ответ (JSON):
output: Ответ модели на запрос.
relevant: Список идентификаторов документов, которые использовались для ответа.